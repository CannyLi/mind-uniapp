"use strict";const e=require("./common/vendor.js"),t={data:()=>({articles:[],searchQuery:""}),onLoad(){this.fetchArticles()},methods:{fetchArticles(){e.index.request({url:"http://localhost:3000/api/articles",method:"GET",success:t=>{t.data.success?this.articles=t.data.data:e.index.showToast({title:"获取文章失败",icon:"none"})},fail:()=>{e.index.showToast({title:"请求失败，请稍后重试",icon:"none"})}})},searchArticles(){""===this.searchQuery.trim()?this.fetchArticles():e.index.request({url:`http://localhost:3000/api/articles/search?q=${this.searchQuery}`,method:"GET",success:t=>{t.data.success?this.articles=t.data.data:e.index.showToast({title:"没有找到相关文章",icon:"none"})},fail:()=>{e.index.showToast({title:"请求失败，请稍后重试",icon:"none"})}})},goToArticleDetail(t){console.log("Navigating to article ID:",t.article_id),e.index.navigateTo({url:`/pages/index/Article/ArticleContent?article_id=${t.article_id}`})}}};const i=e._export_sfc(t,[["render",function(t,i,a,s,c,r){return{a:e.o(((...e)=>r.searchArticles&&r.searchArticles(...e))),b:c.searchQuery,c:e.o((e=>c.searchQuery=e.detail.value)),d:e.f(c.articles,((t,i,a)=>({a:t.article_image,b:e.t(t.title),c:e.t(t.publish_date),d:e.t(t.likes),e:e.t(t.favorites),f:t.article_id,g:e.o((e=>r.goToArticleDetail(t)),t.article_id)})))}}],["__scopeId","data-v-236c9b3c"]]);exports.MiniProgramPage=i;
